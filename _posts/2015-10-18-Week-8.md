---
layout: post
title: "Week 8: Allocator and sizeof"
---

Thankfully, this class is beginning to feel a little more like Object-Oriented Programming and less like Generic Programming & the STL. We're now starting the next project, Allocator, where we roll our own implementation of a first-fit allocator that works on the stack instead of the heap. Unfortunately, I was still sick on Monday and had to miss class, so I missed the explanation of the project, but my project partner has been kind enough to fill me in on the gaps in my understanding. Since we haven't gotten very far yet, I haven't discovered the intended purpose of the exercise exactly, but I have a feeling it's going to involve a lot of painful debugging.

In class we're still driving home what can and can't be done with pointers, and our recent review of pointers to arrays continues that discussion. I find it very odd how `sizeof` works differently on pointers than it does on arrays. For example, in contexts where the array was allocated on the stack, `sizeof` will return the size of the entire array in bytes. For an array declared as `int a[4] = {}`, `sizeof(a)` returns 16. However, you can't expect the same results if you pass an array into a function with an array parameter - in that case, it acts as a pointer, so `sizeof` will always return the size of an address. Then most confusing of all, if you make an array on the heap with `int* const a = new int[10]`, `sizeof(a)` still just gets you the size of a pointer. It almost feels like they shouldn't have allowed `sizeof` to get the size of a full array on the stack, just to keep it consistent. But I'm sure it's less useful otherwise.

**Tip of the Week**: For users of emacs and other applications where there are a lot of Ctrl-* sequences, it can be helpful to change the layout of your keyboard to [swap the Ctrl and CAPS lock keys](http://emacswiki.org/emacs/MovingTheCtrlKey). This puts the Ctrl key closer to the other keys on average and avoids straining your left pinky as much. It is also a fun away to annoy your friends whenever they use your computer and try to copy-paste something. :thumbsup: